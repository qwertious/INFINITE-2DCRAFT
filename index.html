<!DOCTYPE html>
<html>
  <link rel="icon" type="png" href="assets/textures/favicons/ourworldFavicon.png">
  <title>
    INMETANTY
  </title>
  <canvas id="canvas" width=1250 height=700>
  </canvas>
  <script>
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    
    var skyTexture = new Image();
    skyTexture.src = "assets/textures/dimension/ourworldSky.png";
    var grassTexture = new Image();
    grassTexture.src = "assets/textures/block/grass.png";
    
    var music = new Audio("assets/music/ourworldMusic.m4a");
    
    var playerX = 0;
    var playerY = 0;
    if (getCookie("username")!="") {
      let username = getCookie("username");
      window.alert("Welcome back, " + username + "!");
    } else {
      function us() {
    let username = window.prompt("What is your username?","John Doe");
    document.cookie = "username=" + username + "; expires=Fri, 1 Jan 9999 12:00:00 EST";
    }
      for (username == "") {
        us();
      }
    }
    function getCookie(cname) {
  let name = cname + "=";
  let cookie = document.cookie;
  let ca = cookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
    
    document.addEventListener("keypress", function(event) {
      if (event.key == "a" || event.key == "A") {
        playerX = playerX - 10;
      } else if (event.key == "d" || event.key == "D") {
        playerX = playerX + 10;
      }
      music.play();
    });
    function gameLoop() {
      ctx.drawImage(skyTexture, 0, 0, canvas.width, canvas.height);
      ctx.drawImage(grassTexture, canvas.width/2-grassTexture.width/4-playerX, canvas.height/2-grassTexture.height/4+playerY, grassTexture.width/2,grassTexture.height/2);
    }
    setInterval(gameLoop, 100/6);
  </script>
</html>
